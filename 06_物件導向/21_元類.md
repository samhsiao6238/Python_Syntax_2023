# 元類（Metaclasses）

- 元類是 Python 的一個進階特性，可視作「創建類的類」。

- 雖然在一般的日常程式中可能不太需要使用到元類，但在特定的情境下，例如框架或函式庫的開發，元類可以提供強大的功能。

</br>

## 什麼是元類？

- 元類本質上就是「創建類的類」。
  
- 透過元類，我們可以在類被創建時，自動地改變或擴充這個類。

</br>

## 元類的創建

### 1. 使用 `type`

- `type` 本身就是一個元類，可使用 `type` 來動態創建新的類。

```python
# 使用 type 元類動態創建一個新的類 Foo
Foo = type('Foo', (), {})

# 創建一個 Foo 的實例
foo = Foo()
```

### 2. 自定義元類

- 可以定義自己的元類，通常這個元類會繼承自 `type`。

- 下面的例子展示了如何透過元類添加新的屬性：

```python
class Meta(type):
    def __init__(cls, name, bases, attrs):
        setattr(cls, 'my_attribute', '這個屬性是由元類添加的')
        super().__init__(name, bases, attrs)

# 使用我們的元類來創建一個新的類
class MyClass(metaclass=Meta):
    pass

# 創建 MyClass 的一個實例
my_instance = MyClass()

print(my_instance.my_attribute)  # 輸出：這個屬性是由元類添加的
```

</br>

## 元類的基本架構

- 定義一個簡單的元類，並讓其他的類使用它：

```python
class MyMeta(type):
    pass

class MyClass(metaclass=MyMeta):
    pass
```

</br>

## 結論

- 元類提供了一種在類被定義時就修改或擴充它的能力。

- 雖然這是一個強大的工具，但在使用時要特別小心，因為它會增加程式的複雜度。

---

END