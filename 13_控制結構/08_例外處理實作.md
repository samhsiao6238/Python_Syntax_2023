# 主題：例外處理實作
- 從基礎到深入

</br>


- 這將導致 ZeroDivisionError
    ```python
    x = 10 / 0 
    ```
    _OUTPUT_
    ```bash
    ZeroDivisionError: division by zero
    ```

</br>

- 這會主動引發例外
    ```python
    raise ValueError("這是一個無效的值")
    ```
    _OUTPUT_
    ```bash
    ValueError: 這是一個無效的值
    ```

</br>

  - 使用正確的函數卻傳入錯的值引發的錯誤
    ```python
    try:
        x = int(input("請輸入一個數字: "))
    except ValueError:
        print("這不是一個有效的數字!")
    ```
    _OUTPUT_
    ```bash
        這不是一個有效的數字!
    ```

</br>

  - 透過 try-exception 捕捉例外
    ```python
    try:
        x = int(input("請輸入一個數字: "))
    except ValueError as e:
        print(e)
        print("這不是一個有效的數字!")
    ```
    _OUTPUT_
    ```bash
    invalid literal for int() with base 10: 'good'
    這不是一個有效的數字!
    ```

</br>

- 多個 except
    ```python
    try:
        y = 10 / int(input())
    except ZeroDivisionError:
        print("除以零!")
    except ValueError:
        print("這不是一個數字!")
    ```
    _OUTPUT_
    ```bash
    除以零!
    ```

</br>

- 加入 else、finnaly
    ```python
    try:
        y = 10 / int(input())
    except ZeroDivisionError:
        print("除以零!")
    except ValueError:
        print("這不是一個數字!")
    else:
        print(f'y 值等於 {y}')
    finally:
        print('程式碼執行完畢！')
    ```
    _OUTPUT_
    ```bash
    這不是一個數字!
    程式碼執行完畢！
    ```

</br>

- 自訂義例外，繼承 Exception
    ```python
    class MyCustomError(Exception):
        pass

    # 引發自訂義例外
    raise MyCustomError("這是自定義的例外")
    ```
    _OUTPUT_
    ```bash
        MyCustomError: 這是自定義的例外
    ```

</br>


- 自訂義例外類型
    ```python
    class InsufficientFundsError(Exception):
        """當賬戶操作會導致餘額為負時引發此例外。"""
        pass

    class InvalidAmountError(Exception):
        """當提供的金額無效時（例如為負數）引發此例外。"""
        pass

    class BankAccount:
        def __init__(self, initial_balance):
            self.balance = initial_balance

        def withdraw(self, amount):
            if amount < 0:
                raise InvalidAmountError("提款金額必須為正數！")
            
            if self.balance - amount < 0:
                raise InsufficientFundsError("您的賬戶餘額不足！")
            
            self.balance -= amount
            return self.balance

    # 使用範例
    account = BankAccount(100)

    try:
        amount_to_withdraw = -150
        account.withdraw(amount_to_withdraw)
    except InsufficientFundsError:
        print(f"您的提款金額 {amount_to_withdraw} 超出了您的目前餘額！")
    except InvalidAmountError:
        print(f"嘗試提款無效的金額：{amount_to_withdraw}")
    ```
    _OUTPUT_
    ```bash
        嘗試提款無效的金額：-150
    ```

</br>

  - 自訂義例外類型，繼承 Exception
    ```python
    class InsufficientFundsError(Exception):
        """當賬戶操作會導致餘額為負時引發此例外。"""

        def __init__(self, amount, balance):
            super().__init__(f"提款金額 {amount} 超出了您的目前餘額 {balance}！")
            self.amount = amount
            self.balance = balance

        def friendly_message(self):
            return f"很抱歉，您目前只有 {self.balance} 元，但您希望提取 {self.amount} 元。"

    # 使用範例
    account = BankAccount(100)

    try:
        amount_to_withdraw = -150
        account.withdraw(amount_to_withdraw)
    except InsufficientFundsError as e:
        print(e.friendly_message())
    except InvalidAmountError as e:
        print(e)

    ```
    _OUTPUT_
    ```bash
        提款金額必須為正數！
    ```

---

END