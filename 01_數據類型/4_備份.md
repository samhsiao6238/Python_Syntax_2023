# 二進位型

<br>

## 說明

1. bytes、bytearray 和 memoryview 是用於處理二進制數據的數據類型
2. bin() 是一個內建函數，用於將一個整數轉換為二進制字符串
3. 二進制數字以「0b」或「0B」開頭
4. bytes不可變、bytearray可變
5. memoryview可訪問二進位數據的內存區域

<br>

## 1. bytes

    1._範例_

    ```python

    # 建立一個 bytes 物件

    b = bytes([65, 66, 67])

    # 輸出時會輸出 b'ABC'

    # 表示這是一個 bytes 物件

    print(b)

    # bytes不可變，若試圖更改內容會報錯

    try:

        b[0] = 68

    exceptExceptionas e:

    print(f'錯誤代碼：{e}')

    # 'bytes' object does not support item assignment

    # bytes 物件可以用 decode() 方法解碼

    b2 = b'hello'

    print(f'b2的型態：{type(b2)}')

    # 透過 decode() 方法解碼

    decode_b2 = b2.decode('utf-8')

    # 解碼後的型態為 str

    print(type(decode_b2))

    # 解碼後的內容

    print(decode_b2)

    # bytes 物件可以用 encode() 方法編碼

    b3 = 'hello'

    print(f'b3的型態：{type(b3)}')

    # 透過 encode() 方法編碼

    encode_b3 = b3.encode('utf-8')

    # 編碼後的型態為 bytes

    print(type(encode_b3))

    # 編碼後的內容

    print(encode_b3)

    # bytes 物件可以用 join() 方法合併

    b4 = b'hello'

    b5 = b'world'

    # 透過 join() 方法合併

    b6 = b' '.join([b4, b5])

    # 合併後的型態為 bytes

    print(type(b6))

    # 合併後的內容

    print(b6)

    # bytes 物件可以用 split() 方法分割

    b7 = b'hello world'

    # 透過 split() 方法分割

    b8 = b7.split()

    # 分割後的型態為 list

    print(type(b8))

    # 分割後的內容

    print(b8)

    # bytes 物件可以用 replace() 方法取代

    b9 = b'hello world'

    # 透過 replace() 方法取代

    b10 = b9.replace(b'hello', b'hi')

    # 取代後的型態為 bytes

    print(type(b10))

    # 取代後的內容

    print(b10)

    # bytes 物件可以用 find() 方法搜尋

    b11 = b'hello world'

    # 透過 find() 方法搜尋

    b12 = b11.find(b'world')

    # 搜尋後的型態為 int

    print(type(b12))

    # 搜尋後的內容

    print(b12)

    # bytes 物件可以用 startswith() 方法搜尋開頭

    b13 = b'hello world'

    # 透過 startswith() 方法搜尋開頭

    b14 = b13.startswith(b'hello')

    # 搜尋後的型態為 bool

    print(type(b14))

    # 搜尋後的內容

    print(b14)

    # bytes 物件可以用 endswith() 方法搜尋結尾

    b15 = b'hello world'

    # 透過 endswith() 方法搜尋結尾

    b16 = b15.endswith(b'world')

    # 搜尋後的型態為 bool

    print(type(b16))

    # 搜尋後的內容

    print(b16)

    # bytes 物件可以用 count() 方法計算出現次數

    b17 = b'hello world'

    # 透過 count() 方法計算出現次數

    b18 = b17.count(b'l')

    # 計算後的型態為 int

    print(type(b18))

    # 計算後的內容

    print(b18)

    # bytes 物件可以用 capitalize() 方法將第一個字母轉為大寫

    b19 = b'hello world'

    # 透過 capitalize() 方法將第一個字母轉為大寫

    b20 = b19.capitalize()

    # 轉換後的型態為 bytes

    print(type(b20))

    # 轉換後的內容

    print(b20)

    # bytes 物件可以用 title() 方法將每個單字的第一個字母轉為大寫

    b21 = b'hello world'

    # 透過 title() 方法將每個單字的第一個字母轉為大寫

    b22 = b21.title()

    # 轉換後的型態為 bytes

    print(type(b22))

    # 轉換後的內容

    print(b22)

    # bytes 物件可以用 upper() 方法將所有字母轉為大寫

    b23 = b'hello world'

    # 透過 upper() 方法將所有字母轉為大寫

    b24 = b23.upper()

    # 轉換後的型態為 bytes

    print(type(b24))

    # 轉換後的內容

    print(b24)

    # bytes 物件可以用 lower() 方法將所有字母轉為小寫

    b25 = b'HELLO WORLD'

    # 透過 lower() 方法將所有字母轉為小寫

    b26 = b25.lower()

    # 轉換後的型態為 bytes

    print(type(b26))

    # 轉換後的內容

    print(b26)

    # bytes 物件可以用 swapcase() 方法將所有字母大小寫互換

    b27 = b'Hello World'

    # 透過 swapcase() 方法將所有字母大小寫互換

    b28 = b27.swapcase()

    # 轉換後的型態為 bytes

    print(type(b28))

    # 轉換後的內容

    print(b28)

    # bytes 物件可以用 strip() 方法移除頭尾空白

    b29 = b' hello world '

    # 透過 strip() 方法移除頭尾空白

    b30 = b29.strip()

    # 移除後的型態為 bytes

    print(type(b30))

    # 移除後的內容

    print(b30)

    # bytes 物件可以用 lstrip() 方法移除頭部空白

    b31 = b' hello world '

    # 透過 lstrip() 方法移除頭部空白

    b32 = b31.lstrip()

    # 移除後的型態為 bytes

    print(type(b32))

    # 移除後的內容

    print(b32)

    # bytes 物件可以用 rstrip() 方法移除尾部空白

    b33 = b' hello world '

    # 透過 rstrip() 方法移除尾部空白

    b34 = b33.rstrip()

    # 移除後的型態為 bytes

    print(type(b34))

    # 移除後的內容

    print(b34)

    # bytes 物件可以用 splitlines() 方法分割換行符號

    b35 = b'hello\nworld'

    # 透過 splitlines() 方法分割換行符號

    b36 = b35.splitlines()

    # 分割後的型態為 list

    print(type(b36)) # <class 'list'>

    # 分割後的內容

    print(b36) # [b'hello', b'world']

    # bytes 物件可以用 isalnum() 方法檢查是否為英數字

    b37 = b'hello123'

    # 透過 isalnum() 方法檢查是否為英數字

    b38 = b37.isalnum()

    # 檢查後的型態為 bool

    print(type(b38)) # <class 'bool'>

    # 檢查後的內容

    print(b38) # True

    # bytes 物件可以用 isalpha() 方法檢查是否為英文字

    b39 = b'hello'

    # 透過 isalpha() 方法檢查是否為英文字

    b40 = b39.isalpha()

    # 檢查後的型態為 bool

    print(type(b40)) # <class 'bool'>

    # 檢查後的內容

    print(b40) # True

    # bytes 物件可以用 isdigit() 方法檢查是否為數字

    b41 = b'123'

    # 透過 isdigit() 方法檢查是否為數字

    b42 = b41.isdigit()

    # 檢查後的型態為 bool

    print(type(b42)) # <class 'bool'>

    # 檢查後的內容

    print(b42) # True

    # bytes 物件可以用 islower() 方法檢查是否為小寫

    b43 = b'hello'

    # 透過 islower() 方法檢查是否為小寫

    b44 = b43.islower()

    # 檢查後的型態為 bool

    print(type(b44)) # <class 'bool'>

    # 檢查後的內容

    print(b44) # True

    # bytes 物件可以用 isspace() 方法檢查是否為空白

    b45 = b' '

    # 透過 isspace() 方法檢查是否為空白

    b46 = b45.isspace()

    # 檢查後的型態為 bool

    print(type(b46)) # <class 'bool'>

    # 檢查後的內容

    print(b46) # True

    # bytes 物件可以用 istitle() 方法檢查是否為標題

    b47 = b'Hello World'

    # 透過 istitle() 方法檢查是否為標題

    b48 = b47.istitle()

    # 檢查後的型態為 bool

    print(type(b48)) # <class 'bool'>

    # 檢查後的內容

    print(b48) # True

    # bytes 物件可以用 isupper() 方法檢查是否為大寫

    b49 = b'HELLO'

    # 透過 isupper() 方法檢查是否為大寫

    b50 = b49.isupper()

    # 檢查後的型態為 bool

    print(type(b50)) # <class 'bool'>

    # 檢查後的內容

    print(b50) # True

    # bytes 物件可以用 hex() 方法轉換為十六進位

    b51 = b'hello'

    # 透過 hex() 方法轉換為十六進位

    b52 = b51.hex()

    # 轉換後的型態為 str

    print(type(b52)) # <class 'str'>

    # 轉換後的內容

    print(b52) # 68656c6c6f

    # bytes 使用 reverse() 方法反轉元素

    b53 = b'hello'

    # 透過 reverse() 方法反轉元素

    b54 = b53[::-1]

    # 反轉後的型態為 bytes

    print(type(b54)) # <class 'bytes'>

    # 反轉後的內容

    print(b54) # b'olleh'

    ```

    ```bash

    b'ABC'

    錯誤代碼：'bytes' object does not support item assignment

    b2的型態：<class 'bytes'>

    <class 'str'>

    hello

    b3的型態：<class 'str'>

    <class 'bytes'>

    b'hello'

    <class 'bytes'>

    b'hello world'

    <class 'list'>

    [b'hello', b'world']

    <class 'bytes'>

    b'hi world'

    <class 'int'>

    6

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'int'>

    3

    <class 'bytes'>

    b'Hello world'

    <class 'bytes'>

    b'Hello World'

    <class 'bytes'>

    b'HELLO WORLD'

    <class 'bytes'>

    b'hello world'

    <class 'bytes'>

    b'hELLO wORLD'

    <class 'bytes'>

    b'hello world'

    <class 'bytes'>

    b'hello world '

    <class 'bytes'>

    b' hello world'

    <class 'list'>

    [b'hello', b'world']

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'bool'>

    True

    <class 'str'>

    68656c6c6f

    <class 'bytes'>

    b'olleh'

    ```

<br>

## 2. bytearray

1. 範例

   ```python

   ```

# 建立一個 bytearray 物件

ba = bytearray([65, 66, 67])

print(ba)  # 輸出：bytearray(b'ABC')

# 修改 bytearray 物件的內容

ba[0] = 68

print(ba)  # 輸出：bytearray(b'DBC')

# 使用 append() 方法新增元素

ba.append(69)

print(ba)  # 輸出：bytearray(b'DBCE')

# 使用 extend() 方法合併元素

ba.extend([70, 71])

print(ba)  # 輸出：bytearray(b'DBCEFG')

# 使用 insert() 方法插入元素

ba.insert(0, 72)

print(ba)  # 輸出：bytearray(b'HDBCEFG')

# 使用 pop() 方法刪除元素

ba.pop()

print(ba)  # 輸出：bytearray(b'HDBCEF')

# 使用 remove() 方法刪除第一個符合條件的元素

# 若無符合條件的元素則會報錯

# 建立一個 bytearray 物件，包含兩個 69

ba = bytearray([72, 69, 68, 66, 67, 69, 70])

ba.remove(69)

print(ba)   # 輸出：bytearray(b'HDBCF')

# 刪除不存在的元素會報錯

try:

    ba.remove(71)

exceptExceptionas e:

print(f'錯誤代碼：{e}')

# ValueError: bytearray.remove(x): x not in bytearray

# 使用 reverse() 方法反轉元素

ba.reverse()

print(ba)   # 輸出：bytearray(b'FCBDH')

# 使用 clear() 方法清空元素

ba.clear()

print(ba)   # 輸出：bytearray(b'')

# 使用 index() 方法搜尋元素

# 若無符合條件的元素則會報錯

ba = bytearray([72, 69, 68, 66, 67, 69, 70])

print(ba.index(69)) # 輸出：1

# 搜尋不存在的元素會報錯

try:

    ba.index(71)

exceptExceptionas e:

print(f'錯誤代碼：{e}')

# subsection not found

# 使用 count() 方法計算元素出現次數

ba = bytearray([72, 69, 68, 66, 67, 69, 70])

print(ba.count(69)) # 輸出：2

# 使用 copy() 方法複製元素

ba = bytearray([72, 69, 68, 66, 67, 69, 70])

ba2 = ba.copy()

print(ba2) # 輸出：bytearray(b'HDBCFE')

# bytearray 物件不可排序，但可透過 sorted() 函式排序

# 排序後的型態為 list，不會影響原本的 bytearray 物件

ba = bytearray([72, 69, 68, 66, 67, 69, 70])

# 排序

ba2 = sorted(ba)

print(ba2) # 輸出：[66, 67, 68, 69, 69, 70, 72]

print(type(ba2)) # 輸出：list

# 原本的 bytearray 物件不會被排序

print(ba) # 輸出：bytearray(b'HDBCFE')

# 使用 join() 方法合併元素

ba = bytearray([72, 69, 76, 76, 79])

ba2 = bytearray([87, 79, 82, 76, 68])

ba3 = bytearray([72, 69, 76, 76, 79])

# 透過 join() 方法合併

ba4 = bytearray(b' ').join([ba, ba2, ba3])

# 合併後的型態為 bytearray

print(ba4) # 輸出：bytearray(b'HELLO WORLD HELLO')

print(type(ba4)) # 輸出：bytearray

# 使用 split() 方法分割元素

ba = bytearray(b'HELLO WORLD HELLO')

# 透過 split() 方法分割

ba2 = ba.split()

# 分割後的型態為 list

print(ba2) # 輸出：[bytearray(b'HELLO'), bytearray(b'WORLD'), bytearray(b'HELLO')]

print(type(ba2)) # 輸出：list

# 使用 replace() 方法取代元素

ba = bytearray(b'HELLO WORLD HELLO')

print(ba) # 輸出：bytearray(b'HELLO WORLD HELLO')

# 透過 replace() 方法取代

ba2 = ba.replace(b'HELLO', b'HI')

# 取代後的型態為 bytearray

print(ba2) # 輸出：bytearray(b'HI WORLD HI')

print(type(ba2)) # 輸出：bytearray

    ```

    ```

    bytearray(b'ABC')

    bytearray(b'DBC')

    bytearray(b'DBCE')

    bytearray(b'DBCEFG')

    bytearray(b'HDBCEFG')

    bytearray(b'HDBCEF')

    bytearray(b'HDBCEF')

    錯誤代碼：value not found in bytearray

    bytearray(b'FECBDH')

    bytearray(b'')

    1

    錯誤代碼：subsection not found

    2

    bytearray(b'HEDBCEF')

    [66, 67, 68, 69, 69, 70, 72]

    <class 'list'>

    bytearray(b'HEDBCEF')

    bytearray(b'HELLO WORLD HELLO')

    <class 'bytearray'>

    [bytearray(b'HELLO'), bytearray(b'WORLD'), bytearray(b'HELLO')]

    <class 'list'>

    bytearray(b'HELLO WORLD HELLO')

    bytearray(b'HI WORLD HI')

    <class 'bytearray'>

    ```

<br>

## 3. memoryview

1._用於訪問其他二進制數據的內存區域的類型，而不需要複製這些數據_

    ```python

# 建立一個 bytes 物件

bytes_obj = b'Hello, Python'

# 建立一個 memoryview 物件，內容是 bytes_obj

# mv 是一個參照到 bytes_obj 的 memoryview 物件

# 描述的是 bytes_obj 的記憶體位址的內容，而不是 bytes_obj 的內容

mv = memoryview(bytes_obj)

# 顯示原本的 bytes object 和 memoryview object

print(bytes_obj, ' 這是 bytes 物件的內容')

# 印出 memoryview 物件的描述，而不是實際內容

# mv 是一個 memoryview 物件

# 會顯示它參照的 bytes 物件的長度和格式

print(mv, '這是一個記憶體位址區段原始訊息的描述，而不是記憶體的內容')

# 輸出格式「B」代表 bytes_obj 是一個 bytes 物件

print(f'長度：{len(mv),} ，格式：{mv.format}')

# 使用 memoryview object 取得 bytes object 的一部分

print(mv[7:13], '這依舊是個記憶體位址的描述，而不是內容')

print(f'長度：{len(mv[7:13]),} ，格式：{mv[7:13].format}')

# 對切片的記憶區段內容轉換為 bytes 物件，就會顯示真實的內容了

print(bytes(mv[7:13]))

# 使用 memoryview object 修改 bytes object 的內容

# 建立一個 bytearray 物件，因為 bytearray 才是可變的

ba = bytearray(b'Hello, Python')

# 建立一個 memoryview 物件，內容是 ba

mv = memoryview(ba)

# 修改 memoryview object 的內容

mv[7:13] = b'World!'

# 修改後的內容

print(ba) # 輸出：bytearray(b'Hello, World!')

print(mv) # <memory at 0x7f98f89cec80>

    ```

    ```

    b'Hello, Python'  這是 bytes 物件的內容

    <memory at 0x7fbae043aa40> 這是一個記憶體位址區段原始訊息的描述，而不是記憶體的內容

    長度：(13,) ，格式：B

    <memory at 0x7fbae043abc0> 這依舊是個記憶體位址的描述，而不是內容

    長度：(6,) ，格式：B

    b'Python'

    bytearray(b'Hello, World!')

    <memory at 0x7fbae043ac80>

    ```

<br>

## 4. bytearray & bytes 與一般列表的差異

1. bytearray 和 list 都可以插入成員，並且結果看起來非常相似，但 bytearray 可以透過「decode」直接轉換為字串，而 list 不行。
2. bytearray 和 bytes 都是二進制數據的抽象，它們的每一個元素都應該是一個介於0-255的整數，代表一個8位的二進制數字（也就是一個位元組），這與一般的列表不同，列表的元素可以是任何類型的數據。
3. 這些特性使得 bytearray 和 bytes 更適合用於二進制數據的操作，如處理網路協議，讀寫二進制文件，或者與需要二進制數據的C語言庫進行交互等。

   ```python

   ```

# 創建一個 bytearray 對象和一個列表對象

ba = bytearray([0, 1, 2, 3, 4])

lst = [0, 1, 2, 3, 4]

# 在 bytearray 中插入一個元素

ba.append(5)

print(ba)  # 輸出: bytearray(b'\x00\x01\x02\x03\x04\x05')

# 在列表中插入一個元素

lst.append(5)

print(lst)  # 輸出: [0, 1, 2, 3, 4, 5]

# 將 bytearray 轉換為字串

s = ba.decode('utf-8')

print(s)  # 輸出:  "\x00\x01\x02\x03\x04\x05"

# 將列表轉換為字串會出錯

try:

    s = lst.decode('utf-8')

exceptAttributeError:

# 會引發 AttributeError 的錯誤

print('列表沒有 decode() 方法')

    ```

    ```

    bytearray(b'\x00\x01\x02\x03\x04\x05')

    [0, 1, 2, 3, 4, 5]

    �

    列表沒有 decode() 方法

    ```

<br>

---

_END_
